<!doctype html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>СМИ Навигатор</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="assets/common.css">
</head>

<body>
  <h1>СМИ Навигатор</h1>
  <p>
    Общие ресурсы доступны сразу. Выберите радиоцентр, чтобы увидеть
    уникальные кнопки.
  </p>

  <div class="tiles">
    <div class="tile gradient1"
      onclick="window.open('https://forum.sa-mp.ru/index.php?/topic/884226-сми-главный-справочник/#findComment-7336166','_blank')"
      data-href="https://forum.sa-mp.ru/index.php?/topic/884226-сми-главный-справочник/#findComment-7336166"
      data-hash="правила">
      <svg viewBox="0 0 24 24">
        <path d="M12 2L1 7l11 5 9-4.09V17h2V7L12 2z" />
      </svg>
      Правила
    </div>
    <div class="tile gradient2"
      onclick="window.open('https://forum.sa-mp.ru/index.php?/topic/884226-сми-главный-справочник/#findComment-9344452','_blank')"
      data-href="https://forum.sa-mp.ru/index.php?/topic/884226-сми-главный-справочник/#findComment-9344452"
      data-hash="punto">
      <svg viewBox="0 0 24 24">
        <path d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm1 15h-2v-6h2zm0-8h-2V7h2z" />
      </svg>
      Punto Switcher
    </div>
    <div class="tile gradient3" onclick="window.open('https://djoniohanter.com/smi.php','_blank')"
      data-href="https://djoniohanter.com/smi.php" data-hash="логи">
      <svg viewBox="0 0 24 24">
        <path d="M3 3h18v2H3V3zm0 4h12v2H3V7zm0 4h18v2H3v-2zm0 4h12v2H3v-2zm0 4h18v2H3v-2z" />
      </svg>
      Логи объявлений
    </div>
  </div>

  <div class="centers">
    <button class="center-btn" data-center="lvfm">LVFM</button>
    <button class="center-btn" data-center="lsfm">LSFM</button>
    <button class="center-btn" data-center="sffm">SFFM</button>
  </div>


  <div id="lvfm" class="panel">
    <div class="tile gradient-vk"
      onclick="window.open('https://vk.me/join/1VMbWz9mwc/sFgmIZRot2weH2oz7ymGAFyQ=','_blank')">
      Беседа ВК
    </div>
    <div class="tile gradient1"
      onclick="window.open('https://forum.sa-mp.ru/index.php?/topic/1209655-lvfm-%D0%BF%D0%BE%D0%B2%D1%8B%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-%D0%B4%D0%BE%D0%BB%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8/','_blank')"
      data-href="https://forum.sa-mp.ru/index.php?/topic/1209655-lvfm-%D0%BF%D0%BE%D0%B2%D1%8B%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2-%D0%B4%D0%BE%D0%BB%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8/"
      data-hash="lvfm-повышения">
      Повышения</div>
    <div class="tile gradient2"
      onclick="window.open('https://forum.sa-mp.ru/index.php?/topic/1209657-lvfm-%D0%BF%D1%80%D0%B5%D0%BC%D0%B8%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/','_blank')"
      data-href="https://forum.sa-mp.ru/index.php?/topic/1209657-lvfm-%D0%BF%D1%80%D0%B5%D0%BC%D0%B8%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%81%D0%BE%D1%82%D1%80%D1%83%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2/"
      data-hash="lvfm-премии">
      Премии</div>
    <div class="tile gradient3"
      onclick="window.open('https://forum.sa-mp.ru/index.php?/topic/1209652-lvfm-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB-%D0%BA%D0%B0%D0%B4%D1%80%D0%BE%D0%B2/','_blank')"
      data-href="https://forum.sa-mp.ru/index.php?/topic/1209652-lvfm-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB-%D0%BA%D0%B0%D0%B4%D1%80%D0%BE%D0%B2/"
      data-hash="lvfm-наказания">Наказания</div>
  </div>

  <div id="lsfm" class="panel">
    <div class="tile gradient1">Никто не обращался за поддержкой</div>
  </div>

  <div id="sffm" class="panel">
    <div class="tile gradient1">Никто не обращался за поддержкой</div>
  </div>
  <h2>Для лидеров</h2>
  <section style="text-align: center;">
    <details>
      <summary>Скрипт для посчета</summary>
      <div>
        <p>Для использования скрипта необходимо установить расширение Tampermonkey:</p>

        <a href="https://chromewebstore.google.com/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo" target="_blank"
          rel="noopener noreferrer" style="margin-right: 15px;"><i class="fa-brands fa-chrome" aria-hidden="true"
            style="color: rgb(129, 129, 129);"></i><span class="sr-only">Chrome</span></a>
        <a href="https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/" target="_blank" rel="noopener noreferrer"
          style="margin-right: 15px;"><i class="fa-brands fa-firefox" aria-hidden="true"
            style="color: rgb(129, 129, 129)"></i><span class="sr-only">Firefox</span></a>
        <a href="https://microsoftedge.microsoft.com/addons/detail/iikmkjmpaadaobahmlepeloendndfphd" target="_blank"
          rel="noopener noreferrer"><i class="fa-brands fa-edge" aria-hidden="true"
            style="color: rgb(129, 129, 129)"></i><span class="sr-only">Edge</span></a>

        <p>После установки расширения нажмите на кнопку ниже для установки скрипта:</p>
        <div>
          <button
            onclick="window.location.href='https://github.com/platinum-smi/platinum-smi.github.io/raw/refs/heads/main/djoniohanter.com-fix/sum.user.js';">
            <i class="fas fa-download"></i> Установить скрипт
          </button>
        </div>
    </details>
  </section>


  <footer>
    <div>&copy; 2025 СМИ | Absolute RP Platinum</div>
    <div>
      created with ❤️ by
      <a href="https://t.me/q0wqex" target="_blank">q0wqex</a>
    </div>
  </footer>

  <script>
    const centerButtons = document.querySelectorAll(".center-btn");
    const panels = document.querySelectorAll(".panel");
    const tiles = document.querySelectorAll(".tile");

    // Анимация появления плиток
    function showTiles(parent) {
      const tileList = parent
        ? parent.querySelectorAll(".tile")
        : document.querySelectorAll(".tiles .tile");
      tileList.forEach((tile, i) => {
        setTimeout(() => tile.classList.add("show"), i * 100);
      });
    }
    showTiles(); // первые общие плитки

    // Переключение радиоцентров с анимацией
    centerButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        centerButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        const target = btn.dataset.center;
        panels.forEach((p) => p.classList.remove("active"));
        const panel = document.getElementById(target);
        panel.classList.add("active");
        panel
          .querySelectorAll(".tile")
          .forEach((t) => t.classList.remove("show"));
        setTimeout(() => showTiles(panel), 50);
      });
    });

    // --- Обработка хеша: подсветка или редирект при ключе ?go или ?redirect=1 ---
    (function () {
      function extractHashAndParams() {
        const raw = decodeURIComponent(
          window.location.hash.substring(1) || "",
        );
        if (!raw) return { id: "", params: "" };
        const [idPart, paramPart] = raw.split("?", 2);
        return { id: idPart || "", params: paramPart || "" };
      }

      function parseParams(paramString) {
        const params = {};
        if (!paramString) return params;
        paramString.split("&").forEach((pair) => {
          const [k, v = ""] = pair.split("=");
          params[k.toLowerCase()] = v;
        });
        return params;
      }

      function getTileUrl(tile) {
        const dh = tile.getAttribute("data-href");
        if (dh) return dh;
        const onclick = tile.getAttribute("onclick") || "";
        const m = onclick.match(
          /window\.open\(\s*['"]([^'"]+)['"]/i,
        );
        if (m && m[1]) return m[1];
        return null;
      }

      document.addEventListener("DOMContentLoaded", () => {
        const { id, params } = extractHashAndParams();
        if (!id) return;

        const parsed = parseParams(params);
        const shouldRedirect = "go" in parsed;

        const tilesAll = Array.from(
          document.querySelectorAll(".tile"),
        );
        const targetTile = tilesAll.find((t) => {
          const th = (t.dataset.hash || "")
            .toString()
            .toLowerCase();
          return th === id.toLowerCase();
        });

        if (!targetTile) return;

        const parentPanel = targetTile.closest(".panel");
        if (parentPanel) {
          const centerId = parentPanel.id;
          const btn = document.querySelector(
            `.center-btn[data-center="${centerId}"]`,
          );
          if (btn) btn.click();
        }

        if (shouldRedirect) {
          const url = getTileUrl(targetTile);
          if (url)
            setTimeout(() => {
              window.location.href = url;
            }, 150);
          return;
        }

        targetTile.classList.add("highlight");
        setTimeout(
          () => targetTile.classList.remove("highlight"),
          10000,
        );
      });
    })();


  </script>
</body>

</html>
